---
title: "Transactions"
---

### Get Account Transactions

**POST** `/v1/ais/accounts/transactions`

Retrieves transactions using Token.io's `/accounts/{accountId}/transactions`.

#### Headers

| Header          | Type   | Required | Description                  |
|-----------------|--------|----------|------------------------------|
| `Authorization` | string | Yes      | Bearer token.                |
| `x-request-id`  | string | No       | Request ID for tracking.     |

#### Request Body

- **Content-Type**: `application/json`

| Field        | Type    | Required | Description                  |
|--------------|---------|----------|------------------------------|
| `userId`     | string  | Yes      | User ID.                     |
| `merchantId` | integer | Yes      | Merchant ID.                 |
| `accountId`  | string  | Yes      | Token.io account ID.         |
| `pageLimit`  | integer | No       | Max transactions per page (default: 200). |
| `fromDate`   | string  | No       | Start date (ISO 8601).       |
| `toDate`     | string  | No       | End date (ISO 8601).         |

#### Example Request

<Tabs>
  <Tab title="cURL">
    ```bash
    curl --request POST \
      --url https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/transactions \
      --header 'Authorization: Bearer <token>' \
      --header 'Content-Type: application/json' \
      --data '{
        "userId": "user_35100188",
        "merchantId": 1,
        "accountId": "a:C1hTinv2QaUbNMeTmTqjoXakVgiodpzmwtRKWqsGTbaR:ZhBVAJSGzmfoR",
        "pageLimit": 200
      }'
    ```
  </Tab>
  <Tab title="Node.js">
    ```javascript
    const axios = require('axios');

    const data = {
      userId: 'user_35100188',
      merchantId: 1,
      accountId: 'a:C1hTinv2QaUbNMeTmTqjoXakVgiodpzmwtRKWqsGTbaR:ZhBVAJSGzmfoR',
      pageLimit: 200
    };

    const config = {
      method: 'post',
      url: 'https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/transactions',
      headers: {
        'Authorization': 'Bearer <token>',
        'Content-Type': 'application/json'
      },
      data: data
    };

    axios(config)
      .then(response => console.log(response.data))
      .catch(error => console.error(error));
    ```
  </Tab>
  <Tab title="Ruby">
    ```ruby
    require 'net/http'
    require 'json'

    uri = URI('https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/transactions')
    http = Net::HTTP.new(uri.host, uri.port)
    http.use_ssl = true

    request = Net::HTTP::Post.new(uri)
    request['Authorization'] = 'Bearer <token>'
    request['Content-Type'] = 'application/json'
    request.body = {
      userId: 'user_35100188',
      merchantId: 1,
      accountId: 'a:C1hTinv2QaUbNMeTmTqjoXakVgiodpzmwtRKWqsGTbaR:ZhBVAJSGzmfoR',
      pageLimit: 200
    }.to_json

    response = http.request(request)
    puts response.body
    ```
  </Tab>
  <Tab title="C#">
    ```csharp
    using System.Net.Http;
    using System.Text;
    using System.Threading.Tasks;

    var client = new HttpClient();
    var request = new HttpRequestMessage(HttpMethod.Post, "https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/transactions");
    request.Headers.Add("Authorization", "Bearer <token>");
    request.Content = new StringContent("{\"userId\":\"user_35100188\",\"merchantId\":1,\"accountId\":\"a:C1hTinv2QaUbNMeTmTqjoXakVgiodpzmwtRKWqsGTbaR:ZhBVAJSGzmfoR\",\"pageLimit\":200}", Encoding.UTF8, "application/json");

    var response = await client.SendAsync(request);
    var responseString = await response.Content.ReadAsStringAsync();
    Console.WriteLine(responseString);
    ```
  </Tab>
  <Tab title="JavaScript (Browser)">
    ```javascript
    fetch('https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/transactions', {
      method: 'POST',
      headers: {
        'Authorization': 'Bearer <token>',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        userId: 'user_35100188',
        merchantId: 1,
        accountId: 'a:C1hTinv2QaUbNMeTmTqjoXakVgiodpzmwtRKWqsGTbaR:ZhBVAJSGzmfoR',
        pageLimit: 200
      })
    })
      .then(response => response.json())
      .then(data => console.log(data))
      .catch(error => console.error(error));
    ```
  </Tab>
  <Tab title="Python">
    ```python
    import requests

    url = 'https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/transactions'
    headers = {
        'Authorization': 'Bearer <token>',
        'Content-Type': 'application/json'
    }
    data = {
        'userId': 'user_35100188',
        'merchantId': 1,
        'accountId': 'a:C1hTinv2QaUbNMeTmTqjoXakVgiodpzmwtRKWqsGTbaR:ZhBVAJSGzmfoR',
        'pageLimit': 200
    }

    response = requests.post(url, headers=headers, json=data)
    print(response.json())
    ```
  </Tab>
  <Tab title="PHP">
    ```php
    <?php
    $url = 'https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/transactions';
    $data = json_encode([
        'userId' => 'user_35100188',
        'merchantId' => 1,
        'accountId' => 'a:C1hTinv2QaUbNMeTmTqjoXakVgiodpzmwtRKWqsGTbaR:ZhBVAJSGzmfoR',
        'pageLimit' => 200
    ]);

    $options = [
        'http' => [
            'header' => "Authorization: Bearer <token>\r\nContent-Type: application/json\r\n",
            'method' => 'POST',
            'content' => $data
        ]
    ];

    $context = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    echo $result;
    ?>
    ```
  </Tab>
  <Tab title="Java">
    ```java
    import java.io.IOException;
    import java.net.URI;
    import java.net.http.HttpClient;
    import java.net.http.HttpRequest;
    import java.net.http.HttpResponse;

    HttpClient client = HttpClient.newHttpClient();
    HttpRequest request = HttpRequest.newBuilder()
        .uri(URI.create("https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/transactions"))
        .header("Authorization", "Bearer <token>")
        .header("Content-Type", "application/json")
        .POST(HttpRequest.BodyPublishers.ofString("{\"userId\":\"user_35100188\",\"merchantId\":1,\"accountId\":\"a:C1hTinv2QaUbNMeTmTqjoXakVgiodpzmwtRKWqsGTbaR:ZhBVAJSGzmfoR\",\"pageLimit\":200}"))
        .build();

    HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
    System.out.println(response.body());
    ```
  </Tab>
  <Tab title="Go">
    ```go
    package main

    import (
        "bytes"
        "fmt"
        "io/ioutil"
        "net/http"
    )

    func main() {
        url := "https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/transactions"
        jsonStr := []byte(`{"userId":"user_35100188","merchantId":1,"accountId":"a:C1hTinv2QaUbNMeTmTqjoXakVgiodpzmwtRKWqsGTbaR:ZhBVAJSGzmfoR","pageLimit":200}`)

        req, _ := http.NewRequest("POST", url, bytes.NewBuffer(jsonStr))
        req.Header.Set("Authorization", "Bearer <token>")
        req.Header.Set("Content-Type", "application/json")

        client := &http.Client{}
        resp, _ := client.Do(req)
        defer resp.Body.Close()

        body, _ := ioutil.ReadAll(resp.Body)
        fmt.Println(string(body))
    }
    ```
  </Tab>
</Tabs>

#### Responses

- **200 OK**: Transactions retrieved.
  ```json
  {
    "userId": "user_2abc123def456",
    "merchantId": 1,
    "accountId": "a:6CpoqfjmyhfT9QAbcTZ2gcnb8egGfKLKMpxzuZPoaMLB:BzQQ5nvcb7TM4Qts",
    "totalTransactions": 25,
    "pageLimit": 200,
    "transactions": [
      {
        "transactionId": "txn_123",
        "amount": "100.50",
        "currency": "DKK",
        "description": "Payment to merchant",
        "bookingDate": "2024-01-15T10:30:00Z",
        "valueDate": "2024-01-15T10:30:00Z",
        "counterparty": {
          "name": "John Doe",
          "iban": "DK5000400440116243"
        },
        "reference": "REF123456",
        "type": "DEBIT",
        "status": "BOOKED"
      }
    ]
  }
  ```
- **400 Bad Request**: Invalid parameters.
- **404 Not Found**: No authorized consent.
- **500 Internal Server Error**: Server issue.

---

### Get Transactions for Account

**GET** `/v1/ais/accounts/{accountId}/transactions`

Retrieves transactions within a date range.

#### Path Parameters

| Parameter   | Type   | Required | Description             |
|-------------|--------|----------|-------------------------|
| `accountId` | string | Yes      | Token.io account ID.    |

#### Query Parameters

| Parameter | Type   | Required | Description              |
|-----------|--------|----------|--------------------------|
| `fromDate`| string | Yes      | Start date (ISO 8601).   |
| `toDate`  | string | Yes      | End date (ISO 8601).     |

#### Headers

| Header         | Type   | Required | Description             |
|----------------|--------|----------|-------------------------|
| `x-request-id` | string | No       | Request ID for tracking.|

#### Example Request

<Tabs>
  <Tab title="cURL">
    ```bash
    curl --request GET \
      --url 'https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/{accountId}/transactions?fromDate=2024-01-01T00:00:00Z&toDate=2024-01-31T23:59:59Z' \
      --header 'x-request-id: optional-tracking-id'
    ```
  </Tab>
  <Tab title="Node.js">
    ```javascript
    const axios = require('axios');

    const config = {
      method: 'get',
      url: 'https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/{accountId}/transactions',
      headers: {
        'x-request-id': 'optional-tracking-id'
      },
      params: {
        fromDate: '2024-01-01T00:00:00Z',
        toDate: '2024-01-31T23:59:59Z'
      }
    };

    axios(config)
      .then(response => console.log(response.data))
      .catch(error => console.error(error));
    ```
  </Tab>
  <Tab title="Ruby">
    ```ruby
    require 'net/http'

    uri = URI('https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/{accountId}/transactions?fromDate=2024-01-01T00:00:00Z&toDate=2024-01-31T23:59:59Z')
    http = Net::HTTP.new(uri.host, uri.port)
    http.use_ssl = true

    request = Net::HTTP::Get.new(uri)
    request['x-request-id'] = 'optional-tracking-id'

    response = http.request(request)
    puts response.body
    ```
  </Tab>
  <Tab title="C#">
    ```csharp
    using System.Net.Http;
    using System.Threading.Tasks;

    var client = new HttpClient();
    var request = new HttpRequestMessage(HttpMethod.Get, "https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/{accountId}/transactions?fromDate=2024-01-01T00:00:00Z&toDate=2024-01-31T23:59:59Z");
    request.Headers.Add("x-request-id", "optional-tracking-id");

    var response = await client.SendAsync(request);
    var responseString = await response.Content.ReadAsStringAsync();
    Console.WriteLine(responseString);
    ```
  </Tab>
  <Tab title="JavaScript (Browser)">
    ```javascript
    fetch('https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/{accountId}/transactions?fromDate=2024-01-01T00:00:00Z&toDate=2024-01-31T23:59:59Z', {
      method: 'GET',
      headers: {
        'x-request-id': 'optional-tracking-id'
      }
    })
      .then(response => response.json())
      .then(data => console.log(data))
      .catch(error => console.error(error));
    ```
  </Tab>
  <Tab title="Python">
    ```python
    import requests

    url = 'https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/{accountId}/transactions'
    headers = {
        'x-request-id': 'optional-tracking-id'
    }
    params = {
        'fromDate': '2024-01-01T00:00:00Z',
        'toDate': '2024-01-31T23:59:59Z'
    }

    response = requests.get(url, headers=headers, params=params)
    print(response.json())
    ```
  </Tab>
  <Tab title="PHP">
    ```php
    <?php
    $url = 'https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/{accountId}/transactions?fromDate=2024-01-01T00:00:00Z&toDate=2024-01-31T23:59:59Z';

    $options = [
        'http' => [
            'header' => "x-request-id: optional-tracking-id\r\n",
            'method' => 'GET'
        ]
    ];

    $context = stream_context_create($options);
    $result = file_get_contents($url, false, $context);
    echo $result;
    ?>
    ```
  </Tab>
  <Tab title="Java">
    ```java
    import java.io.IOException;
    import java.net.URI;
    import java.net.http.HttpClient;
    import java.net.http.HttpRequest;
    import java.net.http.HttpResponse;

    HttpClient client = HttpClient.newHttpClient();
    HttpRequest request = HttpRequest.newBuilder()
        .uri(URI.create("https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/{accountId}/transactions?fromDate=2024-01-01T00:00:00Z&toDate=2024-01-31T23:59:59Z"))
        .header("x-request-id", "optional-tracking-id")
        .GET()
        .build();

    HttpResponse<String> response = client.send(request, HttpResponse.BodyHandlers.ofString());
    System.out.println(response.body());
    ```
  </Tab>
  <Tab title="Go">
    ```go
    package main

    import (
        "fmt"
        "io/ioutil"
        "net/http"
    )

    func main() {
        url := "https://acount-apis-staging-a8cdb2402163.herokuapp.com/v1/ais/accounts/{accountId}/transactions?fromDate=2024-01-01T00:00:00Z&toDate=2024-01-31T23:59:59Z"

        req, _ := http.NewRequest("GET", url, nil)
        req.Header.Set("x-request-id", "optional-tracking-id")

        client := &http.Client{}
        resp, _ := client.Do(req)
        defer resp.Body.Close()

        body, _ := ioutil.ReadAll(resp.Body)
        fmt.Println(string(body))
    }
    ```
  </Tab>
</Tabs>

#### Responses

- **200 OK**: Transactions list.
  ```json
  [
    {
      "transactionId": "txn_2abc123def456",
      "amount": "100.50",
      "currency": "DKK",
      "description": "Payment to merchant",
      "bookingDate": "2024-01-15T10:30:00Z",
      "valueDate": "2024-01-15T10:30:00Z",
      "counterparty": {
        "name": "John Doe",
        "iban": "DK1234567890123456"
      },
      "reference": "REF123456",
      "type": "DEBIT",
      "status": "BOOKED"
    }
  ]
  ```
- **400 Bad Request**: Invalid date format/range.
